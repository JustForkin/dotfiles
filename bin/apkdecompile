#!/bin/bash

if [[ $# -eq 0 ]] ; then
    echo "Usage: $0 <input-file>"
    exit 1
fi

INPUT=$1
OUTPUT=$(basename $INPUT)_decompiled

rm -rf "$OUTPUT"
echo "Please wait, decompiling $INPUT to $OUTPUT ..."

jadx "$INPUT" -j 4 -r --show-bad-code -d "$OUTPUT" > /dev/null && \
cd $OUTPUT && \
ctags -R . && \
vim
